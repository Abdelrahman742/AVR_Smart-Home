/*
 * Fan.c
 *
 *  Created on: Jul 4, 2024
 *      Author: dell
 */
#include "adc.h"
#include "lcd.h"
#include "lm35_sensor.h"
#include "dc_motor.h"
//#include <util/delay.h>

int main()
{
	uint8 temp;
	ADC_ConfigType ADC_Configurations = {F_CPU_8,Internal};
	LCD_init();
	ADC_init(&ADC_Configurations);
	DcMotor_init();

	LCD_moveCursor(0,3);
	LCD_displayString("Fan is ");
	LCD_moveCursor(1,3);
	LCD_displayString("Temp =    C");

	while(1)
	{
		temp=LM35_getTemperature();
		if(temp<30)
		{
			LCD_displayStringRowColumn(0,10,"OFF");
			DcMotor_Rotate(ST,0);
			LCD_moveCursor(1,9);
			LCD_intgerToString(temp);
		}
		else if(temp>=30 && temp<100)
		{
			LCD_displayStringRowColumn(0,10,"ON");
			LCD_moveCursor(0,12);
			LCD_displayCharacter(' ');
			LCD_moveCursor(1,11);
			LCD_displayCharacter(' ');
		    if(temp>=30 && temp<60)
		    {
		       DcMotor_Rotate(CW,25);
		       LCD_moveCursor(1,9);
		       LCD_intgerToString(temp);
		    }
			else if(temp>=60 && temp<90)
			{
				DcMotor_Rotate(CW,50);
				LCD_moveCursor(1,9);
				LCD_intgerToString(temp);
			}
			else if(temp>=90 && temp<100)
			{
				DcMotor_Rotate(CW,75);
				LCD_moveCursor(1,9);
				LCD_intgerToString(temp);
			}
		}
		else
		{
			LCD_displayStringRowColumn(0,10,"ON");
			LCD_moveCursor(0,12);
			LCD_displayCharacter(' ');
			if(temp>=100 && temp<120)
			{
				DcMotor_Rotate(CW,75);
				LCD_moveCursor(1,10);
				LCD_intgerToString(temp);
			}
			else
			{
				DcMotor_Rotate(CW,100);
				LCD_moveCursor(1,10);
				LCD_intgerToString(temp);
			}
		}
	}
}
