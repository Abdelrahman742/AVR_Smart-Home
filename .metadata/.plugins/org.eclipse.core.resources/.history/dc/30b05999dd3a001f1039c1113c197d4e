/*
 * Fan.c
 *
 *  Created on: Jul 4, 2024
 *      Author: dell
 */
#include "adc.h"
#include "lcd.h"
#include "lm35_sensor.h"
#include "dc_motor.h"
//#include <util/delay.h>

int main()
{
	uint8 temp;
	ADC_ConfigType ADC_Configurations = {F_CPU_8,Internal};
	LCD_init();
	ADC_init(&ADC_Configurations);
	DcMotor_init();


	LCD_displayString("Fan is ");
	LCD_moveCursor(1,0);
	LCD_displayString("Temp =    C");

	while(1)
	{
		temp=LM35_getTemperature();
		if(temp<30)
		{
			LCD_displayStringRowColumn(0,8,"OFF");
			DcMotor_Rotate(ST,0);
			LCD_moveCursor(1,7);
			LCD_intgerToString(temp);
		}
		else if(temp>=30 && temp<60)
		{
			LCD_displayStringRowColumn(0,8,"ON");
			LCD_moveCursor(0,10);
			LCD_displayCharacter(' ');
			DcMotor_Rotate(CW,64);
			LCD_moveCursor(1,7);
			LCD_intgerToString(temp);
		}
		else if(temp>=60 && temp<90)
		{
			LCD_displayStringRowColumn(0,8,"ON");
			LCD_moveCursor(0,10);
			LCD_displayCharacter(' ');
			DcMotor_Rotate(CW,128);
			LCD_moveCursor(1,7);
			LCD_intgerToString(temp);
		}
		else if(temp>=90 && temp<120)
		{
			LCD_displayStringRowColumn(0,8,"ON");
			LCD_moveCursor(0,10);
			LCD_displayCharacter(' ');
			DcMotor_Rotate(CW,192);
			LCD_moveCursor(1,7);
			LCD_intgerToString(temp);
		}
		else
		{
			LCD_displayStringRowColumn(0,8,"ON");
			LCD_moveCursor(0,10);
			LCD_displayCharacter(' ');
			DcMotor_Rotate(CW,256);
			LCD_moveCursor(1,7);
			LCD_intgerToString(temp);
		}
	}
}

